
<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>counter</title>
  
</head>

<style>


input{
    box-sizing: border-box; 
    padding: 8px;
    outline: none;
    border: 1px solid #B0CFE0;
	font-family:'微軟正黑體';
	font-size:14pt;

}input:focus{
    box-shadow: 0 0 5px #B0CFE0;
    border:1px solid #B0CFE0;
}

label{
	font-family:'微軟正黑體';
	padding:10px;
	font-size:14pt;
	float:left;
	width:120px;
	
}

.click_btn{
	width:100px;
	height:100px;
}
	

</style>
<body>
	<div style="padding:50px;">
		<input type="button" value="reset(或按r)" onclick="reset();"></input><br><br>
	
		<label for="sperm1_input">PR&nbsp&nbsp&nbsp&nbsp&nbsp(z or 1)</label><input type="text" id="sperm1_input" value="0" readonly ><input style="margin-left:10px;" type="text" id="sperm1_per_input" value="0" readonly ></input> %<br><br>
		<label for="sperm2_input">NP&nbsp&nbsp&nbsp&nbsp&nbsp(x or 2)</label><input type="text" id="sperm2_input" value="0" readonly ><input style="margin-left:10px;" type="text" id="sperm2_per_input" value="0" readonly ></input> %</input><br><br> 
		<label for="sperm3_input">IM&nbsp&nbsp&nbsp&nbsp&nbsp(c or 3)</label><input type="text" id="sperm3_input" value="0" readonly ><input style="margin-left:10px;" type="text" id="sperm3_per_input" value="0" readonly ></input> %</input><br><br>
		<label for="sperm4_input">Conc. (v or 4)</label><input type="text" id="sperm4_input" value="0" readonly ><input style="margin-left:10px;" type="text" id="sperm4_per_input" value="0" readonly ></input> %</input><br><br>
		<label for="sum_input">sum</label><input type="text" id="sum_input" value="0" readonly ></input>
		<br>
		<br>
		<input class="click_btn" type="button" value="PR" onclick="clickEvent(this);"></input>
		<input class="click_btn" type="button" value="NP" onclick="clickEvent(this);"></input>
		<input class="click_btn" type="button" value="IM" onclick="clickEvent(this);"></input>
		<input class="click_btn" type="button" value="Conc." onclick="clickEvent(this);"></input>
		
	</div>
	<audio id="btnMusic">
		<source = src="public/music/button08.mp3" type="audio/mp3">	
	</audio>
	<audio id="bellMusic">
		<source = src="public/music/bell.mp3" type="audio/mp3">	
	</audio>
	





</body>

<script type="text/javascript">
	var btn_audio = document.getElementById("btnMusic");
	var bell_audio = document.getElementById("bellMusic");
	var sum=0;
	document.onkeyup = function(e) {
		//var x =e.keyCode;
		var x =e.key;
		
		typeEvent(x);
	}
	
	async function typeEvent(x){
	
		//alert(e.keyCode);
		var sperm1 = document.getElementById('sperm1_input');
		var sperm2 = document.getElementById('sperm2_input');
		var sperm3 = document.getElementById('sperm3_input');
		var sperm4 = document.getElementById('sperm4_input');
		var sum_input = document.getElementById('sum_input');
		//var sum = parseInt(sperm1.value) + parseInt(sperm2.value) + parseInt(sperm3.value) + parseInt(sperm4.value) ;
		if(x=='r'){
			reset();
			return;
		}
		
		
		
		switch(x)
		{
			case 'z':
				//alert(sperm1.value);
				btn_audio.play();
				if(sperm1.value=='' || sperm1.value==null){
					sperm1.value = 1;
				}else{
					 sperm1.value = parseInt(sperm1.value) + 1;
				}
				sum++;

				break;
				
			case 'Z':
				//alert(sperm1.value);
				btn_audio.play();
				if(sperm1.value=='' || sperm1.value==null){
					sperm1.value = 1;
				}else{
					 sperm1.value = parseInt(sperm1.value) + 1;
				}
				sum++;

				break;
			case '1':
				//alert(sperm1.value);
				btn_audio.play();
				if(sperm1.value=='' || sperm1.value==null){
					sperm1.value = 1;
				}else{
					 sperm1.value = parseInt(sperm1.value) + 1;
				}
				sum++;

				break;	

			
			case 'x':
				btn_audio.play();
				if(sperm2.value=='' || sperm2.value==null){
					sperm2.value = 1;
				}else{
					 sperm2.value = parseInt(sperm2.value) + 1;
				}
				sum++;
			  
				break;
			  
			case 'X':
				btn_audio.play();
				if(sperm2.value=='' || sperm2.value==null){
					sperm2.value = 1;
				}else{
					 sperm2.value = parseInt(sperm2.value) + 1;
				}
				sum++;
				break; 
			case '2':
				btn_audio.play();
				if(sperm2.value=='' || sperm2.value==null){
					sperm2.value = 1;
				}else{
					 sperm2.value = parseInt(sperm2.value) + 1;
				}
				sum++;
				break; 
			
			case 'c':
				btn_audio.play();
				if(sperm3.value=='' || sperm3.value==null){
					sperm3.value = 1;
				}else{
					 sperm3.value = parseInt(sperm3.value) + 1;
				}
				sum++;
				break;
				
			case 'C':
				btn_audio.play();
				if(sperm3.value=='' || sperm3.value==null){
					sperm3.value = 1;
				}else{
					 sperm3.value = parseInt(sperm3.value) + 1;
				}
				sum++;
				break;
			case '3':
				btn_audio.play();
				if(sperm3.value=='' || sperm3.value==null){
					sperm3.value = 1;
				}else{
					 sperm3.value = parseInt(sperm3.value) + 1;
				}
				sum++;
				break;		
				
			case 'v':
				btn_audio.play();
				if(sperm4.value=='' || sperm4.value==null){
					sperm4.value = 1;
				}else{
					 sperm4.value = parseInt(sperm4.value) + 1;
				}
				sum++;
				break;
			case 'V':
				btn_audio.play();
				if(sperm4.value=='' || sperm4.value==null){
					sperm4.value = 1;
				}else{
					 sperm4.value = parseInt(sperm4.value) + 1;
				}
				sum++;
				break;
			case '4':
				btn_audio.play();
				if(sperm4.value=='' || sperm4.value==null){
					sperm4.value = 1;
				}else{
					 sperm4.value = parseInt(sperm4.value) + 1;
				}
				sum++;
				break;	
			  
	  
		}
		
		
		if(sum % 100 ==0 && sum!=0){
			bell_audio.play();
			await sleep(10);
			alert(sum);
			//return;
		}
		
		sum_input.value=sum;
		calPercentage(sum,parseInt(sperm1.value),parseInt(sperm2.value),parseInt(sperm3.value),parseInt(sperm4.value))
		
		
	
	}
	
	async function sleep(ms = 0) {
		return new Promise(r => setTimeout(r, ms));
	}
	
	function clickEvent(ele){
		//alert(ele.value);
		typeEvent(ele.value);
	}
	
	function calPercentage(sum,val1,val2,val3,val4){
		//alert(sum);
		var sperm1_per = document.getElementById('sperm1_per_input');
		var sperm2_per = document.getElementById('sperm2_per_input');
		var sperm3_per = document.getElementById('sperm3_per_input');
		var sperm4_per = document.getElementById('sperm4_per_input');
		
		sperm1_per.value = (val1/sum *100).toFixed(2);
		sperm2_per.value = (val2/sum *100).toFixed(2);
		sperm3_per.value = (val3/sum *100).toFixed(2);
		sperm4_per.value = (val4/sum *100).toFixed(2);
		
		
	}
	
	function reset(){
		var sperm1 = document.getElementById('sperm1_input');
		var sperm2 = document.getElementById('sperm2_input');
		var sperm3 = document.getElementById('sperm3_input');
		var sperm4 = document.getElementById('sperm4_input');
		var sum_input = document.getElementById('sum_input');
		
		var sperm1_per = document.getElementById('sperm1_per_input');
		var sperm2_per = document.getElementById('sperm2_per_input');
		var sperm3_per = document.getElementById('sperm3_per_input');
		var sperm4_per = document.getElementById('sperm4_per_input');
		
		sperm1.value=0;
		sperm2.value=0;
		sperm3.value=0;
		sperm4.value=0;
		sum_input.value = 0;
		
		sperm1_per.value=0;
		sperm2_per.value=0;
		sperm3_per.value=0;
		sperm4_per.value=0;
		
		sum=0;
		
	}
	
	
	

</script>


</html>